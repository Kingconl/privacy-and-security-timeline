---
const { events } = Astro.props;
---

<style>
  .timeline {
    --line-width: 2px;
    --padding: 4em;
  
    display: inline-flex;
    flex-direction: column;
  
    padding-right: var(--padding);

    border-right: var(--line-width) solid black;
  }

  .event {
    --event-width: 500px;
    --event-timeline-offset: calc((var(--padding)) + 2px);

    position: relative;

    list-style: none;

    width: var(--event-width);

    border: 2px solid black;
    border-radius: 8px;

    &::after {
      --width: 3em;
      --height: 2px;
    
      display: block;
      content: '';

      position: absolute;
      right: calc(var(--event-timeline-offset) * -1);
      /*top: calc(50% - (var(--height) / 2));*/
      top: calc(1.485em - (var(--height) / 2));

      height: var(--height);
      width: var(--width);

      background: black;
    }

    &:nth-child(even) {
      transform: translateX(calc(var(--event-width) + (var(--event-timeline-offset)) * 2 + var(--line-width)));

      &::after {
        left: calc(var(--event-timeline-offset) * -1);
      }
    }
  }

  .event-wrapper {
    margin: 16px;
  }

  h2 {
    font-size: 1.125em;
  }

  h3 {
    font-size: 0.9em;
    margin-bottom: 0.2em;
  }

  .sources {
    font-size: 0.9em;
    padding-left: 1.25em;
  }
</style>

<div class="timeline-wrapper">
  <ol class="timeline">{events.map((event) => <li class="event">
    <div class="event-wrapper">
    	<h2 id={event.id}>{event.title}</h2>
    	<div>{event.date}</div>
    	<p>{event.description}</p>
      <h3>Sources</h3>
      <ul class="sources">{event.sources.map((source) =>
        <li><a href={source.url}>{source.title}</a>, <span class="source-site">{source.site}</span></li>)
      }</ul>
    </div>
  </li>)}<ol>
</div>
